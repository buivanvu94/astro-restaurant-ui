---
import BaseLayout from './BaseLayout.astro';
import Header from '@/components/layout/Header';
import Sidebar from '@/components/layout/Sidebar';
import AuthGuard from '@/components/AuthGuard';

export interface Props {
  title?: string;
}

const { title = 'Dashboard - CMS Admin' } = Astro.props;
---

<BaseLayout title={title}>
  <!-- Auth Guard Component - checks after React hydration -->
  <AuthGuard client:only="react" />
  <!-- Dark background with gold accents -->
  <div class="flex h-screen overflow-hidden bg-gradient-to-br from-black via-black to-zinc-950">
    <!-- Background effects -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-0 right-0 w-96 h-96 bg-amber-500/10 rounded-full blur-3xl"></div>
      <div class="absolute bottom-0 left-0 w-96 h-96 bg-yellow-500/10 rounded-full blur-3xl"></div>
      <div class="absolute inset-0 bg-[linear-gradient(rgba(251,191,36,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(251,191,36,0.02)_1px,transparent_1px)] bg-[size:50px_50px]"></div>
    </div>

    <!-- Sidebar -->
    <Sidebar client:load />

    <!-- Main content -->
    <div class="relative flex-1 flex flex-col overflow-hidden">
      <!-- Header -->
      <Header client:load />

      <!-- Page content -->
      <main class="flex-1 overflow-y-auto text-base leading-relaxed">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-base leading-relaxed [&_input]:text-base [&_textarea]:text-base [&_select]:text-base [&_label]:text-base [&_button]:text-base [&_p]:text-base [&_span]:text-base [&_a]:text-base [&_th]:text-base [&_td]:text-base">
          <slot />
        </div>
      </main>
    </div>
  </div>
</BaseLayout>
